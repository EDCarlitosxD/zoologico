<section>
    <app-indicador class="indicator" [step]="{
        ticket: '',
        confirmacion: 'active',
        finalizar: ''
    }"></app-indicador>
    <app-atras-btn class="back"></app-atras-btn>
    <div class="casiListo">

        <div class="texto">
            <h3 class="thin text-center">Casi listo</h3>
            <h6 class="text-center">Resumen del pedido</h6>

            <div class="boletos w-100">
                <p class="title thin text-center bg-black-800 text-white-200">Boletos</p>
                <div class="resumen">
                    <div class="boleto d-block">
                      <div class="d-flex justify-content-start w-full" style="gap: 20px;" *ngFor="let boleto of boletos; let i = index">
                        <p  class="p1 thin">{{boleto.titulo}}</p>
                        <app-contador-resumen-pedido  [id]="boleto.id!" [cantidad]="boletosVenta[i].cantidad" tipo="boleto" ></app-contador-resumen-pedido>
                        <p class="p1 bold">$ {{boleto.precio * boletosVenta[i].cantidad}}</p>
                      </div>
                </div>


                </div>
            </div>

            <div class="boletos w-100">
                <p class="title thin text-center bg-black-800 text-white-200 w-100">Tours</p>

                <div class="resumenTours">
                  <div *ngFor="let tour of toursInfo; let i = index">
                    <div class="d-flex align-items-center w-100 justify-content-center text-center gap-1">
                      <p class="p1 titleTour thin">{{tour.tour.titulo}}</p>
                      <svg (click)="eliminarCarritoTour(tour.horario.id)" xmlns="http://www.w3.org/2000/svg" class="minusIco" viewBox="0 0 21 20" fill="none">
                          <path fill-rule="evenodd" clip-rule="evenodd" d="M10.5 20C16.023 20 20.5 15.523 20.5 10C20.5 4.477 16.023 0 10.5 0C4.977 0 0.5 4.477 0.5 10C0.5 15.523 4.977 20 10.5 20ZM6.5 9C6.23478 9 5.98043 9.10536 5.79289 9.29289C5.60536 9.48043 5.5 9.73478 5.5 10C5.5 10.2652 5.60536 10.5196 5.79289 10.7071C5.98043 10.8946 6.23478 11 6.5 11H14.5C14.7652 11 15.0196 10.8946 15.2071 10.7071C15.3946 10.5196 15.5 10.2652 15.5 10C15.5 9.73478 15.3946 9.48043 15.2071 9.29289C15.0196 9.10536 14.7652 9 14.5 9H6.5Z" fill="#AAC767"/>
                        </svg>
                    </div>

                    <div class="d-flex align-items-center w-100 justify-content-center text-center flex-row gap-3">
                        <p class="p1 thin">Fecha</p>
                        <p class="bold">{{tour.horario.fecha}}</p>
                    </div>

                    <div class="d-flex align-items-center w-100 justify-content-center text-center flex-row gap-4">
                        <div class="d-flex align-items-center justify-content-center text-center flex-row gap-2">
                            <p class="p1 thin">Hora Inicio</p>
                            <p class="bold">{{tour.horario.horario_inicio}}</p>
                        </div>
                        <div class="d-flex align-items-center justify-content-center text-center flex-row gap-2">
                            <p class="p1 thin">Hora Final</p>
                            <p class="bold">{{tour.horario.horario_fin}}</p>
                        </div>

                    </div>

                    <div class="d-flex align-items-center w-100 justify-content-center text-center gap-5">
                        <div class="d-flex align-items-center justify-content-center gap-3">
                            <p class="p1 thin">Personas</p>
                            <app-contador-resumen-pedido tipo="tour" [cantidad]="tours[i].cantidad!" [id]="tour.horario.id"></app-contador-resumen-pedido>
                        </div>
                        <p class="p1 bold">$ {{tour.reserva.cantidad! * tour.tour.precio}}</p>
                    </div>
                  </div>


                    <app-warning></app-warning>
                </div>
            </div>





        </div>



        <h6>Total: ${{totalBoletos + totalRecorridos}}</h6>

        <!-- TARJETA -->
        <div class="metodoPago" data-bs-toggle="modal" data-bs-target="#metodoDePago">
            <p class="p1">Método de pago</p>
            <div class="cardbtn">
                <div class="tarjeta">
                    <svg *ngIf="tarjetaSeleccionada" xmlns="http://www.w3.org/2000/svg" class="visa-Desk" viewBox="0 0 48 33" fill="none">
                        <path d="M1.92 0.5C0.859824 0.5 0 1.41251 0 2.53822V30.4618C0 31.5874 0.860256 32.5 1.92 32.5H46.08C47.1402 32.5 48 31.5875 48 30.4618V2.53822C48 1.41256 47.1397 0.5 46.08 0.5H1.92ZM28.668 10.0366C29.8362 10.0366 30.7725 10.3105 31.3695 10.5653L30.9615 13.2898L30.6915 13.1449C30.1353 12.8902 29.4209 12.645 28.4355 12.6624C27.2558 12.6624 26.7105 13.221 26.7105 13.7437C26.7036 14.3326 27.3477 14.7209 28.401 15.3025C30.1394 16.1999 30.9429 17.2879 30.9315 18.7181C30.9081 21.3279 28.852 23.0143 25.6845 23.0143C24.3332 22.9985 23.0313 22.6949 22.3275 22.3439L22.7505 19.5286L23.139 19.7293C24.1286 20.1987 24.7694 20.3886 25.9755 20.3886C26.8416 20.3886 27.7711 20.0036 27.7785 19.1608C27.7841 18.6105 27.39 18.2182 26.217 17.6019C25.074 17.0004 23.5587 15.9929 23.5755 14.1863C23.5934 11.7424 25.6906 10.0366 28.668 10.0366ZM4.24498 10.4363H9.10949C9.76454 10.4626 10.2934 10.6865 10.476 11.4411L11.5245 17.1863C11.5247 17.1868 11.5243 17.1889 11.5245 17.1895L11.8395 18.9109L14.793 10.4363H17.988L13.239 22.8408L10.047 22.844L7.506 12.8344C9.0179 13.6847 10.3051 14.6685 11.0505 16.0223C10.8583 15.5939 10.6051 15.1103 10.281 14.6338C9.90365 14.0788 9.08866 13.3622 8.748 13.0573C7.56096 11.995 5.94888 11.1371 4.20749 10.6831L4.24498 10.4363ZM19.2585 10.4506H22.383L20.4285 22.836H17.304L19.2585 10.4506ZM36.906 10.4506H39.273L41.751 22.836H38.91C38.91 22.836 38.6281 21.4131 38.5365 20.9793C38.09 20.9793 34.9669 20.9745 34.6155 20.9745C34.4966 21.3098 33.9705 22.836 33.9705 22.836H30.756L35.3025 11.4793C35.6244 10.6723 36.1731 10.4506 36.906 10.4506ZM37.1385 13.7818C36.9848 14.2425 36.7171 14.9865 36.735 14.9538C36.735 14.9538 35.7732 17.6769 35.5215 18.3838L38.049 18.3821C37.9272 17.768 37.344 14.8393 37.344 14.8393L37.1385 13.7818Z" fill="#281B70"/>
                      </svg>


                      <p class="bold p1">{{tarjetaSeleccionada?.numero_tarjeta || ''}}</p>
                </div>


                    <svg xmlns="http://www.w3.org/2000/svg" class="sig-desk" viewBox="0 0 36 37" fill="none">
                        <path d="M18 0.5C14.4399 0.5 10.9598 1.55568 7.99974 3.53355C5.03966 5.51141 2.73255 8.32263 1.37018 11.6117C0.00779915 14.9008 -0.348661 18.52 0.345873 22.0116C1.04041 25.5033 2.75474 28.7106 5.27208 31.2279C7.78943 33.7453 10.9967 35.4596 14.4884 36.1541C17.98 36.8487 21.5992 36.4922 24.8883 35.1298C28.1774 33.7674 30.9886 31.4603 32.9665 28.5003C34.9443 25.5402 36 22.0601 36 18.5C35.996 13.7273 34.0983 9.15126 30.7235 5.77646C27.3487 2.40167 22.7727 0.503972 18 0.5ZM24.9615 19.652L15.9615 27.152C15.8102 27.2783 15.6356 27.3735 15.4475 27.4323C15.2594 27.491 15.0616 27.5122 14.8653 27.4945C14.669 27.4768 14.4782 27.4206 14.3036 27.3292C14.1291 27.2377 13.9743 27.1128 13.848 26.9615C13.7217 26.8102 13.6265 26.6355 13.5677 26.4475C13.509 26.2594 13.4878 26.0615 13.5055 25.8653C13.5232 25.669 13.5794 25.4782 13.6708 25.3036C13.7623 25.1291 13.8872 24.9743 14.0385 24.848L21.6555 18.5L14.0385 12.152C13.8872 12.0257 13.7623 11.8709 13.6708 11.6964C13.5794 11.5218 13.5232 11.331 13.5055 11.1347C13.4878 10.9384 13.509 10.7406 13.5677 10.5525C13.6265 10.3645 13.7217 10.1898 13.848 10.0385C13.9743 9.88722 14.1291 9.76228 14.3036 9.67084C14.4782 9.57939 14.669 9.52322 14.8653 9.50553C15.0616 9.48784 15.2594 9.50898 15.4475 9.56774C15.6356 9.6265 15.8102 9.72173 15.9615 9.848L24.9615 17.348C25.1303 17.4888 25.2661 17.6649 25.3593 17.864C25.4525 18.0631 25.5008 18.2802 25.5008 18.5C25.5008 18.7198 25.4525 18.9369 25.3593 19.136C25.2661 19.3351 25.1303 19.5112 24.9615 19.652Z" fill="#8BAC3F"/>
                      </svg>

                      <svg xmlns="http://www.w3.org/2000/svg" class="sig-mob" viewBox="0 0 24 25" fill="none">
                        <path d="M12 0.5C9.62663 0.5 7.30655 1.20379 5.33316 2.52236C3.35977 3.84094 1.8217 5.71509 0.913451 7.9078C0.00519943 10.1005 -0.232441 12.5133 0.230582 14.8411C0.693605 17.1689 1.83649 19.3071 3.51472 20.9853C5.19295 22.6635 7.33115 23.8064 9.65892 24.2694C11.9867 24.7324 14.3995 24.4948 16.5922 23.5866C18.7849 22.6783 20.6591 21.1402 21.9776 19.1668C23.2962 17.1935 24 14.8734 24 12.5C23.9974 9.31821 22.7322 6.26751 20.4824 4.01764C18.2325 1.76778 15.1818 0.502648 12 0.5ZM16.641 13.268L10.641 18.268C10.5402 18.3522 10.4237 18.4157 10.2983 18.4548C10.1729 18.494 10.041 18.5081 9.9102 18.4963C9.77937 18.4845 9.65213 18.4471 9.53577 18.3861C9.4194 18.3251 9.31618 18.2419 9.23201 18.141C9.14783 18.0401 9.08434 17.9237 9.04517 17.7983C9.00599 17.6729 8.9919 17.541 9.00369 17.4102C9.01549 17.2794 9.05293 17.1521 9.1139 17.0358C9.17486 16.9194 9.25815 16.8162 9.35901 16.732L14.437 12.5L9.35901 8.268C9.25815 8.18382 9.17486 8.08061 9.1139 7.96424C9.05293 7.84787 9.01549 7.72064 9.00369 7.5898C8.9919 7.45896 9.00599 7.32709 9.04517 7.20169C9.08434 7.0763 9.14783 6.95986 9.23201 6.859C9.31618 6.75814 9.4194 6.67486 9.53577 6.61389C9.65213 6.55293 9.77937 6.51548 9.9102 6.50369C10.041 6.49189 10.1729 6.50599 10.2983 6.54516C10.4237 6.58433 10.5402 6.64782 10.641 6.732L16.641 11.732C16.7535 11.8259 16.8441 11.9433 16.9062 12.076C16.9684 12.2087 17.0006 12.3535 17.0006 12.5C17.0006 12.6465 16.9684 12.7913 16.9062 12.924C16.8441 13.0567 16.7535 13.1741 16.641 13.268Z" fill="#8BAC3F"/>
                      </svg>

            </div>
        </div>


        <button (click)="comprar()" routerLink="loading">Pagar</button>
    </div>
</section>




<!-- MODALS -->
<div class="modal fade align-items-center justify-content-center" id="metodoDePago" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="metodo_pagoModal modal-content bg-white-800 border-0">

        <div class="title">
            <h6 class="thin">Cambiar Método de Pago</h6>
            <svg xmlns="http://www.w3.org/2000/svg" data-bs-dismiss="modal" class="close" viewBox="0 0 56 56" fill="none">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M56 28C56 35.4261 53.05 42.548 47.799 47.799C42.548 53.05 35.4261 56 28 56C20.5739 56 13.452 53.05 8.20101 47.799C2.94999 42.548 0 35.4261 0 28C0 20.5739 2.94999 13.452 8.20101 8.20101C13.452 2.94999 20.5739 0 28 0C35.4261 0 42.548 2.94999 47.799 8.20101C53.05 13.452 56 20.5739 56 28ZM18.739 16.261C18.4104 15.9324 17.9647 15.7478 17.5 15.7478C17.0353 15.7478 16.5896 15.9324 16.261 16.261C15.9324 16.5896 15.7478 17.0353 15.7478 17.5C15.7478 17.9647 15.9324 18.4104 16.261 18.739L25.5255 28L16.261 37.261C16.0983 37.4237 15.9692 37.6169 15.8812 37.8295C15.7931 38.042 15.7478 38.2699 15.7478 38.5C15.7478 38.7301 15.7931 38.958 15.8812 39.1705C15.9692 39.3831 16.0983 39.5763 16.261 39.739C16.5896 40.0676 17.0353 40.2522 17.5 40.2522C17.7301 40.2522 17.958 40.2069 18.1705 40.1188C18.3831 40.0308 18.5763 39.9017 18.739 39.739L28 30.4745L37.261 39.739C37.4237 39.9017 37.6169 40.0308 37.8295 40.1188C38.042 40.2069 38.2699 40.2522 38.5 40.2522C38.7301 40.2522 38.958 40.2069 39.1705 40.1188C39.3831 40.0308 39.5763 39.9017 39.739 39.739C39.9017 39.5763 40.0308 39.3831 40.1188 39.1705C40.2069 38.958 40.2522 38.7301 40.2522 38.5C40.2522 38.2699 40.2069 38.042 40.1188 37.8295C40.0308 37.6169 39.9017 37.4237 39.739 37.261L30.4745 28L39.739 18.739C39.9017 18.5763 40.0308 18.3831 40.1188 18.1705C40.2069 17.958 40.2522 17.7301 40.2522 17.5C40.2522 17.2699 40.2069 17.042 40.1188 16.8295C40.0308 16.6169 39.9017 16.4237 39.739 16.261C39.5763 16.0983 39.3831 15.9692 39.1705 15.8812C38.958 15.7931 38.7301 15.7478 38.5 15.7478C38.2699 15.7478 38.042 15.7931 37.8295 15.8812C37.6169 15.9692 37.4237 16.0983 37.261 16.261L28 25.5255L18.739 16.261Z" fill="#D1504B"/>
              </svg>
        </div>

        <form action="">
            <div class="seleccionar-tarjeta" *ngFor="let tarjeta of tarjetas">
                <input [(ngModel)]="tarjetaSeleccionada" [value]="tarjeta" type="radio" id="visa" name="visa" >
                <div class="tarjeta">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="22" viewBox="0 0 32 22" fill="none">
                        <path d="M1.28 0.333984C0.573216 0.333984 0 0.942324 0 1.6928V20.3085C0 21.0589 0.573504 21.6673 1.28 21.6673H30.72C31.4268 21.6673 32 21.059 32 20.3085V1.6928C32 0.942358 31.4265 0.333984 30.72 0.333984H1.28ZM19.112 6.69173C19.8908 6.69173 20.515 6.87435 20.913 7.04417L20.641 8.86052L20.461 8.76391C20.0902 8.5941 19.614 8.43066 18.957 8.44225C18.1706 8.44225 17.807 8.81466 17.807 9.1631C17.8024 9.55569 18.2318 9.81461 18.934 10.2024C20.0929 10.8006 20.6286 11.5259 20.621 12.4794C20.6054 14.2193 19.2347 15.3435 17.123 15.3435C16.2221 15.333 15.3542 15.1306 14.885 14.8966L15.167 13.0197L15.426 13.1535C16.0858 13.4665 16.513 13.593 17.317 13.593C17.8944 13.593 18.5141 13.3364 18.519 12.7745C18.5228 12.4077 18.26 12.1461 17.478 11.7353C16.716 11.3343 15.7058 10.6626 15.717 9.4582C15.7289 7.82895 17.127 6.69173 19.112 6.69173ZM2.82998 6.95819H6.07299C6.5097 6.97572 6.86227 7.12498 6.984 7.62805L7.68301 11.4582C7.6831 11.4585 7.68288 11.4599 7.68301 11.4603L7.89299 12.6079L9.86198 6.95819H11.992L8.82598 15.2278L6.69798 15.23L5.004 8.5569C6.01194 9.12376 6.87005 9.77962 7.36701 10.6822C7.23888 10.3966 7.07005 10.0742 6.85402 9.75649C6.60243 9.38649 6.0591 8.90876 5.832 8.70552C5.04064 7.99734 3.96592 7.42538 2.80499 7.12274L2.82998 6.95819ZM12.839 6.96773H14.922L13.619 15.2247H11.536L12.839 6.96773ZM24.604 6.96773H26.182L27.834 15.2247H25.94C25.94 15.2247 25.7521 14.2761 25.691 13.9868C25.3933 13.9868 23.3113 13.9837 23.077 13.9837C22.9977 14.2072 22.647 15.2246 22.647 15.2246H20.504L23.535 7.65353C23.7496 7.1155 24.1154 6.96773 24.604 6.96773ZM24.759 9.18854C24.6565 9.49567 24.4781 9.99163 24.49 9.96986C24.49 9.96986 23.8488 11.7852 23.681 12.2565L25.366 12.2554C25.2848 11.846 24.896 9.89349 24.896 9.89349L24.759 9.18854Z" fill="#281B70"/>
                      </svg>
                      <p class="p1">{{tarjeta.numero_tarjeta}}</p>
                      <svg (click)="eliminarTarjeta(tarjeta.id!)" xmlns="http://www.w3.org/2000/svg" class="minus" viewBox="0 0 20 20" fill="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M10 20C15.523 20 20 15.523 20 10C20 4.477 15.523 0 10 0C4.477 0 0 4.477 0 10C0 15.523 4.477 20 10 20ZM6 9C5.73478 9 5.48043 9.10536 5.29289 9.29289C5.10536 9.48043 5 9.73478 5 10C5 10.2652 5.10536 10.5196 5.29289 10.7071C5.48043 10.8946 5.73478 11 6 11H14C14.2652 11 14.5196 10.8946 14.7071 10.7071C14.8946 10.5196 15 10.2652 15 10C15 9.73478 14.8946 9.48043 14.7071 9.29289C14.5196 9.10536 14.2652 9 14 9H6Z" fill="#757C75"/>
                      </svg>
                </div>
            </div>



            <div class="addTarjeta-button">
                <div class="addTarjeta">
                    <svg xmlns="http://www.w3.org/2000/svg" data-bs-toggle="modal" data-bs-target="#addTarjeta" class="plus" viewBox="0 0 28 28" fill="none">
                        <path d="M14 0C11.2311 0 8.52431 0.821086 6.22202 2.35942C3.91973 3.89776 2.12532 6.08426 1.06569 8.64243C0.00606598 11.2006 -0.271181 14.0155 0.269012 16.7313C0.809205 19.447 2.14258 21.9416 4.10051 23.8995C6.05845 25.8574 8.55301 27.1908 11.2687 27.731C13.9845 28.2712 16.7994 27.9939 19.3576 26.9343C21.9157 25.8747 24.1022 24.0803 25.6406 21.778C27.1789 19.4757 28 16.7689 28 14C28 12.1615 27.6379 10.341 26.9343 8.64243C26.2307 6.94387 25.1995 5.40052 23.8995 4.1005C22.5995 2.80048 21.0561 1.76925 19.3576 1.06569C17.659 0.362121 15.8385 0 14 0ZM18.2 15.4H15.4V18.2C15.4 18.5713 15.2525 18.9274 14.99 19.1899C14.7274 19.4525 14.3713 19.6 14 19.6C13.6287 19.6 13.2726 19.4525 13.0101 19.1899C12.7475 18.9274 12.6 18.5713 12.6 18.2V15.4H9.8C9.4287 15.4 9.07261 15.2525 8.81005 14.9899C8.5475 14.7274 8.4 14.3713 8.4 14C8.4 13.6287 8.5475 13.2726 8.81005 13.01C9.07261 12.7475 9.4287 12.6 9.8 12.6H12.6V9.8C12.6 9.42869 12.7475 9.0726 13.0101 8.81005C13.2726 8.5475 13.6287 8.4 14 8.4C14.3713 8.4 14.7274 8.5475 14.99 8.81005C15.2525 9.0726 15.4 9.42869 15.4 9.8V12.6H18.2C18.5713 12.6 18.9274 12.7475 19.19 13.01C19.4525 13.2726 19.6 13.6287 19.6 14C19.6 14.3713 19.4525 14.7274 19.19 14.9899C18.9274 15.2525 18.5713 15.4 18.2 15.4Z" fill="#AAC767"/>
                      </svg>
                      <p class="p1">Agregar Tarjeta</p>
                </div>
                <button class="chiquito">Seleccionar</button>
            </div>


        </form>

      </div>
    </div>
  </div>



<div class="modal fade" id="addTarjeta" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="metodo_pagoModal modal-content bg-transparent border-0">
        <app-add-tarjeta (tarjetaGuardada)="onTarjetaGuardada($event)" ></app-add-tarjeta>
      </div>
    </div>
  </div>
